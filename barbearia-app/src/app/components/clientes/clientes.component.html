<div class="container">
  <div class="page-header">
    <h2>👥 Clientes</h2>
    <button class="btn btn-success" (click)="mostrarFormulario = !mostrarFormulario">
      {{ mostrarFormulario ? '❌ Cancelar' : '➕ Novo Cliente' }}
    </button>
  </div>

  <div *ngIf="mostrarFormulario" class="card form-card fade-in-up">
    <h3>{{ editandoCliente ? 'Editar Cliente' : 'Cadastrar Novo Cliente' }}</h3>
    <form (ngSubmit)="cadastrarCliente()">
      <div class="form-group">
        <label class="form-label" for="nome">Nome:</label>
        <input 
          class="form-input" 
          [class.error]="erros['nome']"
          type="text" 
          id="nome" 
          name="nome" 
          [(ngModel)]="cliente.nome" 
          placeholder="Digite o nome completo"
          required>
        <div *ngIf="erros['nome']" class="error-message">{{ erros['nome'] }}</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="celular">Celular:</label>
        <input 
          class="form-input" 
          [class.error]="erros['celular']"
          type="tel" 
          id="celular" 
          name="celular" 
          [(ngModel)]="cliente.celular" 
          (input)="formatarCelular()"
          placeholder="XX-XXXXXXXXX"
          maxlength="12"
          required>
        <div *ngIf="erros['celular']" class="error-message">{{ erros['celular'] }}</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="email">Email:</label>
        <input 
          class="form-input" 
          [class.error]="erros['email']"
          type="email" 
          id="email" 
          name="email" 
          [(ngModel)]="cliente.email" 
          placeholder="exemplo@email.com"
          required>
        <div *ngIf="erros['email']" class="error-message">{{ erros['email'] }}</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="idade">Idade:</label>
        <input 
          class="form-input" 
          [class.error]="erros['idade']"
          type="number" 
          id="idade" 
          name="idade" 
          [(ngModel)]="cliente.idade" 
          min="1" 
          max="120"
          placeholder="Digite a idade"
          required>
        <div *ngIf="erros['idade']" class="error-message">{{ erros['idade'] }}</div>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">{{ editandoCliente ? '✏️ Atualizar' : '💾 Salvar' }} Cliente</button>
        <button type="button" class="btn btn-secondary" (click)="cancelarEdicao()">❌ Cancelar</button>
      </div>
      
      <div *ngIf="Object.keys(erros).length > 0" class="validation-summary">
        <h4>⚠️ Corrija os seguintes erros:</h4>
        <ul>
          <li *ngFor="let erro of Object.values(erros)">{{ erro }}</li>
        </ul>
      </div>
    </form>
  </div>

  <div class="clientes-grid">
    <div *ngFor="let c of clientes" class="cliente-card card fade-in-up">
      <div class="cliente-avatar">👤</div>
      <h4>{{ c.nome }}</h4>
      <div class="cliente-info">
        <p>📱 {{ c.celular }}</p>
        <p>✉️ {{ c.email }}</p>
        <p>🎂 {{ c.idade }} anos</p>
      </div>
      <div class="cliente-actions">
        <button class="btn btn-edit" (click)="editarCliente(c)">✏️ Editar</button>
        <button class="btn btn-delete" (click)="deletarCliente(c)">🗑️ Deletar</button>
      </div>
    </div>
  </div>
</div>